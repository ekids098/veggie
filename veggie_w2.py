from enum import StrEnum


class Category(StrEnum):
    CHILD = 'child'
    MALE = 'male'
    FEMALE = 'female'

class WeightUnit(StrEnum):
    TAI_JIN = 'å°æ–¤'
    KILOGRAM = 'å…¬æ–¤'


def unit_conversion(child_count: int, female_count: int, male_count: int, days: int):
    """1.å–®ä½æ›ç®—å‡½å¼ï¼šè¨ˆç®—å„é¡äººæ•¸çš„æ‡‰æ”å–è”¬èœç¸½é‡ï¼ˆå…¬å…‹ï¼‰ï¼Œæ›ç®—æˆè”¬èœçš„æ‡‰è³¼è²·ç¸½é‡ï¼ˆå…¬æ–¤ã€å°æ–¤ï¼‰ã€‚"""
    # å››å€‹åƒæ•¸ï¼š12 æ­²ä»¥ä¸‹å…’ç«¥äººæ•¸ child_count ã€12æ­²ä»¥ä¸Šå¥³æ€§äººæ•¸ female_count ã€12æ­²ä»¥ä¸Šç”·æ€§äººæ•¸ male_count åŠå–®æ¬¡é ˆè³¼è²·çš„è”¬èœä»½é‡å¤©æ•¸ days ã€‚
    # è¨­å®šå­—å…¸ï¼šæ¯äººæ¯æ—¥æ‡‰æ”å–è”¬èœé‡ï¼Œæ¯ä»½è”¬èœ 100 å…‹ã€‚
    unit_daily_grams = {
        Category.CHILD: 3 * 100,   # 300 å…‹ã€‚
        Category.FEMALE: 4 * 100,  # 400 å…‹ã€‚
        Category.MALE: 5 * 100     # 500 å…‹ã€‚
    }

    # ä½¿ç”¨å­—å…¸ï¼Œè¨ˆç®—å„é¡äººæ•¸çš„æ‡‰æ”å–è”¬èœç¸½é‡ï¼ˆå…¬å…‹ï¼‰ã€‚
    # å„é¡äººæ•¸çš„æ‡‰æ”å–è”¬èœç¸½é‡ = å„é¡äººæ•¸çš„æ¯æ—¥ç¸½æ‡‰æ”å–è”¬èœé‡ x å–®æ¬¡é ˆè³¼è²·çš„è”¬èœä»½é‡å¤©æ•¸ã€‚
    total_days_grams = (
        child_count * unit_daily_grams[Category.CHILD] +
        female_count * unit_daily_grams[Category.FEMALE] +
        male_count * unit_daily_grams[Category.MALE]
    ) * days

    # å°‡å…¬å…‹æ›ç®—æˆå…¬æ–¤èˆ‡å°æ–¤ï¼Œæ¯ 600 å…¬å…‹ç­‰æ–¼ 1 å°æ–¤ã€‚
    # å°æ–¤çš„è‹±æ–‡æ˜¯ Taiwanese catty æˆ– Taiwan cattyã€‚
    kilogram = total_days_grams / 1000
    Taiwan_catty = total_days_grams / 600

    # å›å‚³æ›ç®—å¾Œçš„è”¬èœæ‡‰è³¼è²·ç¸½é‡ï¼ˆå…¬æ–¤ã€å°æ–¤ï¼‰ï¼Œå››æ¨äº”å…¥åˆ°æŒ‡å®šçš„å°æ•¸ç¬¬ 2 ä½ã€‚
    # round(number, num)ï¼šå°‡æ•¸å€¼ number å››æ¨äº”å…¥åˆ°æŒ‡å®šçš„å°æ•¸ä½æ•¸ num ã€‚
    return {
        WeightUnit.KILOGRAM: round(kilogram, 2),
        WeightUnit.TAI_JIN: round(Taiwan_catty, 2)
    }


# ğŸ¹ä¸»ç¨‹å¼ğŸ¹ã€‚
def user_input():
    """2.ä½¿ç”¨è€…è¼¸å…¥å‡½å¼ï¼šå…ˆåŸ·è¡Œ 2.ç¢ºèªè¼¸å…¥å‡½å¼ ï¼Œè®“ä½¿ç”¨è€…è¼¸å…¥äººæ•¸èˆ‡å¤©æ•¸å¾Œï¼Œå†åŸ·è¡Œ 1.å–®ä½æ›ç®—å‡½å¼ ä¸¦è¼¸å‡ºï¼ˆè¦‹ä¸Šæ–¹ï¼‰ã€‚"""
    
    print('ğŸ‘µ å…§åº•åï¼Œä»Šä»”æ—¥æœ‰å¹¾å€‹äººæ¬²é£²ï¼Ÿ')
    print('ï¼ˆè£¡é¢åï¼Œä»Šå¤©å¹¾ä½è¦å–æœæ±ï¼Ÿï¼‰\n')


    def check_input(prompt):
        """3.ç¢ºèªè¼¸å…¥å‡½å¼ï¼šä½¿ç”¨è€…é ˆè¼¸å…¥æ•´æ•¸æ•¸å­—ï¼Œä¸¦ä¸”ä¸å«æ–‡å­—ã€å°æ•¸é»ã€ç¬¦è™Ÿç­‰ï¼Œæ‰èƒ½æ­£ç¢ºè½‰æ›æˆæ•´æ•¸ï¼Œå¦å‰‡é ˆé‡æ–°è¼¸å…¥ã€‚"""
        # prompt ä»£è¡¨è¼¸å…¥çš„æç¤ºæ–‡å­—å­—ä¸²ã€‚
        while True:
            user_input = input(prompt).strip()

            # âŒç©ºå­—ä¸²ã€‚
            if user_input == "":
                print('\nâŒ è«‹å¯«å€‹æ•¸å­—å˜¿ï¼Œæ¯‹é€šç©ºç™½å•¦ï¼')
                continue

            # âœ…æ•´æ•¸ã€‚
            if user_input.isdigit():
                return int(user_input)

            # âŒå°æ•¸é»ã€‚
            elif "." in user_input:
                print('\nâŒ é˜¿å¬¤ä¸æœƒç®—å•¦ï½å¯«æ•´æ•¸å°±å¥½ï¼')

            # âŒå«æœ‰å–®ä½ã€‚
            elif any(unit in user_input for unit in ["äºº", "å¤©"]):
                print('\nâŒ å¯«æ•¸å­—å°±å¥½ï¼Œé˜¿å¬¤çŸ¥é“å–®ä½ï¼')

            # âŒå…¶ä»–æ–‡å­—ã€ç‰¹æ®Šç¬¦è™Ÿç­‰ã€‚
            else:
                print('\nâŒ é˜¿å¬¤çœ‹ä¸æ‡‚é€™æ˜¯ä»€éº¼ï¼Œå¯«æ•¸å­—ï¼ˆåƒ 1ã€2ã€3ï¼‰å°±å¥½ï¼')

            print('\nğŸ‘µ å†å¯«ä¸€æ¬¡å˜¿ï½\n')

    
    # 4.è¼¸å…¥ï¼šåŸ·è¡Œç¢ºèªè¼¸å…¥å‡½å¼ï¼Œè®“ä½¿ç”¨è€…ä¾åºè¼¸å…¥ã€‚
    child_count = check_input('ğŸ‘¶ å°æœ‹å‹ï¼ˆ12 æ­²ä»¥ä¸‹ï¼‰ï¼š __ äººï¼ˆè«‹è¼¸å…¥æ•´æ•¸æ•¸å­—ï¼‰')
    female_count = check_input('ğŸ‘© å¥³æ€§ï¼ˆ12 æ­²ä»¥ä¸Šï¼‰ï¼š __ äººï¼ˆè«‹è¼¸å…¥æ•´æ•¸æ•¸å­—ï¼‰')
    male_count = check_input('ğŸ‘¨ ç”·æ€§ï¼ˆ12 æ­²ä»¥ä¸Šï¼‰ï¼š __ äººï¼ˆè«‹è¼¸å…¥æ•´æ•¸æ•¸å­—ï¼‰')

    print('\nğŸ‘µ é˜¿å¬¤å¹«ä½ å¤šæº–å‚™ï¼Œå¸¶è¿”å»æ…¢æ…¢é£²å˜¿ï¼')
    print('ï¼ˆé˜¿å¬¤å¹«ä½ å¤šæº–å‚™ï¼Œå¸¶å›å»æ…¢æ…¢å–å˜¿ï¼ï¼‰\n')

    days = check_input('ğŸ“… æƒ³è¦æº–å‚™å¹¾å¤©çš„ä»½é‡ï¼š __ å¤©ï¼ˆè«‹è¼¸å…¥æ•´æ•¸æ•¸å­—ï¼‰')
    print()

    
    # 5.è¼¸å‡ºï¼šåŸ·è¡Œå–®ä½æ›ç®—å‡½å¼ï¼Œè¼¸å‡ºè”¬èœè³¼è²·ç¸½é‡ï¼ˆå…¬æ–¤ã€å°æ–¤ï¼‰ã€‚
    input('ğŸ¹ æŒ‰ Enter ä¸€éµå¾—è³‡ğŸ¹')
    result = unit_conversion(child_count, female_count, male_count, days)
    print(f"ğŸ¹ è”¬èœç¸½å…±è¦è²· {result['å…¬æ–¤']} å…¬æ–¤ï¼ˆç´„ {result['å°æ–¤']} å°æ–¤ï¼‰ğŸ¹")
